---
import type { Heading } from "../interfaces/heading";

interface Props {
  extractedHeadings: Heading[];
}

const { extractedHeadings } = Astro.props;

const headings = extractedHeadings.map(({ level, text, id }) => {
  const indentClass = `heading-level-${level}`;
  return `<a class="heading-link ${indentClass}" href="#${id}">${text}</a>`;
});
---

<div class="table-of-contents">
  <h2>Tabla de Contenidos</h2>
  <div set:html={headings} />
</div>

<style>
    .table-of-contents {
      position: sticky;
      top: 20px;
      height: max-content;
      padding: 20px;
      width: 30%;
      border-radius: 8px;
    }
    /* Estilos para tabla de contenidos */
    :global(.heading-link) {
      display: block;
      margin-bottom: 8px;
      padding: 4px 0;
      color: #888;
      text-decoration: none;
      border-radius: 4px;
      transition: color 0.2s ease;
      font-weight: 400;
    }

    :global(.heading-link:hover) {
      color: #ddd;
    }

    :global(.heading-level-1) { padding-left: 0; }
    :global(.heading-level-2) { padding-left: 20px; }
    :global(.heading-level-3) { padding-left: 40px; }
    :global(.heading-level-4) { padding-left: 60px; }

    @media (max-width: 768px) {
      .table-of-contents {
        display: none;
      }
    }
</style>